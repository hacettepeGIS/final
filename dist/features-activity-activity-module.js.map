{"version":3,"sources":["webpack:///./src/app/features/activity/activity.component.html","webpack:///./src/app/features/activity/activity.component.ts","webpack:///./src/app/features/activity/activity.module.ts","webpack:///./src/app/features/activity/activity.routing.ts"],"names":[],"mappings":"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","file":"features-activity-activity-module.js","sourcesContent":["module.exports = \"<div id=\\\"content\\\" class=\\\"no-padding\\\">\\n    <div style=\\\"height: 90vh;\\\"\\n        #leaflet\\n        leaflet \\n        [leafletOptions]=\\\"options\\\" \\n        [leafletLayersControl]=\\\"layersControl\\\"\\n        [leafletLayers]=\\\"layers\\\">\\n    </div>\\n\\n    <div style=\\\"position: absolute;left: 50px;top: 10px;z-index: 999;\\\">\\n        <div class=\\\"btn-group\\\">\\n            <select class=\\\"btn-group\\\" dropdown=\\\"\\\" style=\\\"height: 32px;\\\" (change)=\\\"showEvents()\\\"\\n                    [(ngModel)]=\\\"selectedActivity\\\"\\n                    [style.display]=\\\"isActivitySelectVisible ? 'block' : 'none'\\\">\\n                <option *ngFor=\\\"let activityType of activityTypes\\\" [ngValue]=\\\"activityType\\\">{{activityType.name}}</option>\\n              </select>\\n            <a class=\\\"btn btn-default\\\" placement=\\\"bottom\\\" (click)=\\\"start()\\\" [style.display]=\\\"isStartVisible ? 'block' : 'none'\\\"><strong><i\\n                        class=\\\"fa fa-play fa-lg text-success\\\"></i></strong></a>\\n            <a class=\\\"btn btn-default\\\" placement=\\\"bottom\\\" (click)=\\\"stop()\\\" [style.display]=\\\"isStopVisible ? 'block' : 'none'\\\"><strong><i\\n                        class=\\\"fa fa-stop fa-lg text-danger\\\"></i></strong></a>\\n            <a class=\\\"btn btn-success\\\" placement=\\\"bottom\\\" (click)=\\\"save()\\\" [style.display]=\\\"isSaveVisible ? 'block' : 'none'\\\"><strong><i\\n                        class=\\\"fa fa-save fa-lg\\\"></i></strong></a>\\n            <a class=\\\"btn btn-danger\\\" placement=\\\"bottom\\\" (click)=\\\"discard()\\\" [style.display]=\\\"isDiscardVisible ? 'block' : 'none'\\\"><strong><i\\n                class=\\\"fa fa-trash-o fa-lg\\\"></i></strong></a>\\n        </div>\\n        <div class=\\\"text-info\\\"><strong>Total Distance {{(totalDistance/1000).toFixed(2)}} km</strong></div>\\n        <div class=\\\"text-info\\\"><strong>Elapsed Time {{duration}}</strong></div>\\n    </div> \\n</div>\"","import { Component, OnInit, AfterViewInit, ViewChild, ComponentFactoryResolver, Injector, EmbeddedViewRef, DoCheck, OnDestroy } from '@angular/core';\nimport { tileLayer, latLng, icon, marker, MapOptions, LatLng } from 'leaflet';\nimport { LeafletDirective } from '@asymmetrik/ngx-leaflet';\nimport { ActivityTypesService, NotificationService, JsonApiService, ActivityService } from '@app/core/services';\nimport {antPath} from 'leaflet-ant-path';\n\n@Component({\n  selector: 'activity',\n  templateUrl: './activity.component.html'\n})\nexport class ActivityComponent implements OnInit,AfterViewInit,DoCheck,OnDestroy {\n  totalDistance = 0.00000;\n  duration:string='00:00:00'\n  componentRef: any;\n  subscription: any;\n\n  @ViewChild('leaflet', { read: LeafletDirective }) leaflet:LeafletDirective;\n  options:MapOptions={}\n  layers: any[];\n\n  activityTypes=[]\n  selectedActivity={};\n  eventsData: Array<any> = [{\n    lat: 39.920763,\n    lng: 32.854061,\n    time:null\n  }];\n  antPath;\n  ip:string=\"0.0.0.0\"\n\n  layersControl = {\n    baseLayers: {\n      'Open Street Map': tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 30, attribution: '...' }),\n      'Open Cycle Map': tileLayer('http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png?apikey=c0ac24eb615e4c72b536cc9512d19cb5', { maxZoom: 30, attribution: '...' }),\n      'Transport': tileLayer('https://tile.thunderforest.com/transport/{z}/{x}/{y}.png?apikey=c0ac24eb615e4c72b536cc9512d19cb5', { maxZoom: 30, attribution: '...' }),\n      'Landscape': tileLayer('https://tile.thunderforest.com/landscape/{z}/{x}/{y}.png?apikey=c0ac24eb615e4c72b536cc9512d19cb5', { maxZoom: 30, attribution: '...' }), \n      'Outdoors': tileLayer('https://tile.thunderforest.com/outdoors/{z}/{x}/{y}.png?apikey=c0ac24eb615e4c72b536cc9512d19cb5', { maxZoom: 30, attribution: '...' }), \n      'Transport Dark': tileLayer('https://tile.thunderforest.com/transport-dark/{z}/{x}/{y}.png?apikey=c0ac24eb615e4c72b536cc9512d19cb5', { maxZoom: 30, attribution: '...' }), \n      'Spinal Map': tileLayer('https://tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png?apikey=c0ac24eb615e4c72b536cc9512d19cb5', { maxZoom: 30, attribution: '...' }), \n      'Pioneer': tileLayer('https://tile.thunderforest.com/pioneer/{z}/{x}/{y}.png?apikey=c0ac24eb615e4c72b536cc9512d19cb5', { maxZoom: 30, attribution: '...' }), \n      'Mobile Atlas': tileLayer('https://tile.thunderforest.com/mobile-atlas/{z}/{x}/{y}.png?apikey=c0ac24eb615e4c72b536cc9512d19cb5', { maxZoom: 30, attribution: '...' }), \n      'Neighbourhood': tileLayer('https://tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey=c0ac24eb615e4c72b536cc9512d19cb5', { maxZoom: 30, attribution: '...' }) \n    }\n  }\n\n  constructor(private resolver: ComponentFactoryResolver, \n              private inj: Injector,\n              private activityService:ActivityService,\n              private activityTypesService:ActivityTypesService,\n              private notificationService:NotificationService) { }\n\n  ngOnInit() {\n    this.options = {\n      layers: [\n        tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 30, attribution: '...' })\n      ],\n      zoom: 18,\n      center: latLng(39.920763, 32.854061),\n    };   \n\n    this.activityTypesService.getTypes().subscribe((resp)=>{\n      this.activityTypes=resp\n      this.selectedActivity=resp[0]\n      this.showEvents()\n    },(err)=>{\n      alert(`Activity types could not fetch from api service. Error : ${err}`)\n    })\n    this.activityService.ip$.subscribe((resp)=>this.ip=resp.ip);\n  }\n\n  id = navigator.geolocation.watchPosition((position) => {\n    this.eventsData.push({ lat:position.coords.latitude, lng:position.coords.longitude, time:new Date() });\n\n    (<LatLng>this.options.center).lat = position.coords.latitude;\n    (<LatLng>this.options.center).lng = position.coords.longitude;\n\n    this.leaflet.map.panTo(this.options.center)\n    \n    if(this.antPath){\n      this.leaflet.map.removeLayer(this.antPath)\n      if(this.isStopVisible==true)\n        this.antPath._path.push([position.coords.latitude,position.coords.longitude])\n      this.leaflet.map.addLayer(this.antPath)\n    }\n\n    this.showEvents()\n  },(err) => {\n      if (err.code == 1) {\n        alert(\"Error: Access is denied!\");\n      } else if (err.code == 2) {\n        alert(\"Error: Position is unavailable!\");\n      }\n    }, { timeout: 5000 })\n\n  isStartVisible:boolean=true;\n  isStopVisible:boolean=false;\n  isSaveVisible:boolean=false;\n  isDiscardVisible:boolean=false;\n  isActivitySelectVisible:boolean=true;\n\n  start(){\n    this.duration='00:00:00'\n    this.totalDistance=0\n    this.isActivitySelectVisible=false;\n    this.isStartVisible=false;\n    this.isStopVisible=true;\n\n    this.antPath._path=[];\n  }\n\n  stop(){\n    this.isStopVisible=false;\n    this.isSaveVisible=true;\n    this.isDiscardVisible=true;\n\n    this.notificationService.smallBox({\n      title: \"FINISH!\",\n      content: \"Current activity finished! Please save your activity.\",\n      color: \"#296191\",\n      iconSmall: \"fa fa-trophy fa-2x fadeInRight animated\",\n      timeout: 5000\n    })\n  }\n\n  save(){\n    let lastPoint = this.eventsData[this.eventsData.length - 1];\n    let hour = lastPoint.time.getHours() \n    let message= hour>5 && hour<11 ? \"Morning \" :\n                 hour>=11 && hour<15 ? \"Lunch \" :\n                 hour>=15 && hour<18 ? \"Afternoon \" :\n                 hour>=18 && hour<22 ? \"Evenning \" : \"Night \";\n    message+=this.selectedActivity[\"name\"]\n\n    var activity = this.antPath.toGeoJSON()\n    this.notificationService.smartMessageBox({\n      title: \"Warning\",\n      content: \"Would you like to give a name to your activity?\",\n      buttons: \"[Accept]\",\n      input: \"text\",\n      placeholder: \"Enter your activity name\",\n      inputValue: message\n    }, (ButtonPress, Value) => {\n      activity.properties.name=Value\n      activity.properties.ip=this.ip\n      activity.properties.activityTypeId=this.selectedActivity[\"id\"]\n      activity.properties.duration=this.calculateTotalDurationTime()\n      activity.properties.distance=this.totalDistance\n\n      this.activityService.saveActivity(activity).subscribe(\n        ()=>{\n          this.notificationService.smallBox({\n            title: \"SAVED!\",\n            content: \"Activity has saved successfully!\",\n            color: \"#739E73\",\n            iconSmall: \"fa fa-save fa-2x fadeInRight animated\",\n            timeout: 5000\n          })\n  \n          this.isSaveVisible=false;\n          this.isDiscardVisible=false;\n          this.isStartVisible=true;\n          this.isActivitySelectVisible=true;\n      \n          this.antPath._path=[];\n          this.totalDistance = 0.00000;\n          this.duration ='00:00:00'\n        },\n        (err)=>this.notificationService.smallBox({\n          title: \"ERROR!\",\n          content: err,\n          color: \"#C46A69\",\n          iconSmall: \"fa fa-bell fa-2x fadeInRight animated\",\n          timeout: 5000\n        })\n      );\n    });\n  }\n\n  discard(){\n    this.notificationService.smartMessageBox({\n      title: \"Warning\",\n      content: \"Are you sure discarding your activity?\",\n      buttons: '[No][Yes]'\n    }, (ButtonPressed) => {\n      if (ButtonPressed === \"Yes\") {\n        this.isSaveVisible=false;\n        this.isDiscardVisible=false;\n        this.isStartVisible=true;\n        this.isActivitySelectVisible=true;\n        this.totalDistance = 0.00000;\n        this.duration ='00:00:00'\n    \n        this.antPath._path=[];\n        this.notificationService.smallBox({\n          title: \"Info\",\n          content: \"Activity removed successfully\",\n          color: \"#C46A69\",\n          iconSmall: \"fa fa-check fa-2x fadeInRight animated\",\n          timeout: 4000\n        });\n      }\n    });\n  }\n\n  showEvents() {\n    const markers: any[] = [];\n    let lastPoint = this.eventsData[this.eventsData.length - 1];\n    markers.push(\n      marker(\n        [lastPoint.lat, lastPoint.lng],\n        {\n          icon: icon({\n            iconUrl: `assets/img/${this.selectedActivity[\"id\"]}.png`, \n            iconSize: [32, 32]\n          })\n        }\n      )\n    );\n\n    this.layers = markers;\n\n    if(this.isStopVisible==true){\n      this.calculateTotalDistance()\n      let milliseconds = this.calculateTotalDurationTime()\n      this.duration = this.activityService.convertMsToDateString(milliseconds)\n    }\n  }\n\n  ngAfterViewInit() {\n    this.antPath = antPath([[]], {color: 'blue', weight: 5, reverse: false,}).addTo(this.leaflet.map);\n  }\n\n  ngDoCheck() {\n    if (this.componentRef) {\n      this.componentRef.changeDetectorRef.detectChanges();\n    }\n  }\n\n  ngOnDestroy() {\n    navigator.geolocation.clearWatch(this.id);\n    if (this.componentRef) {\n      this.subscription.unsubscribe();\n      this.componentRef.destroy();\n      this.componentRef = null;\n    }\n  }\n\n  calculateTotalDistance(){\n    // Calculating the distance of the polyline\n    var tempLatLng:LatLng = null;\n    this.totalDistance = 0.00000;\n\n    this.antPath._path.forEach(position => {\n      let latlng=new LatLng(position[0],position[1])\n      if(tempLatLng == null){\n        tempLatLng = latlng;\n        return;\n      }\n      this.totalDistance += tempLatLng.distanceTo(latlng);\n      tempLatLng = latlng;\n    });\n  }\n\n  calculateTotalDurationTime(){\n    let startPoint = this.eventsData.find(x => x.time > 0);\n    if(!startPoint)\n      return 0\n    \n    let lastPoint = this.eventsData[this.eventsData.length - 1];\n    return lastPoint.time.getTime() - startPoint.time.getTime()\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\nimport {ActivityComponent} from \"./activity.component\";\nimport { SharedModule } from '@app/shared/shared.module';\nimport { activityRouting } from './activity.routing';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    activityRouting,\n    SharedModule,\n    LeafletModule\n  ],\n  declarations: [ActivityComponent]\n})\nexport class ActivityModule { }\n","import { Routes, RouterModule } from '@angular/router';\nimport {ModuleWithProviders} from \"@angular/core\";\nimport { ActivityComponent } from './activity.component';\n\nexport const activityRoutes: Routes = [\n    {\n        path: '',\n        component: ActivityComponent,\n        data: {\n            pageTitle: 'Activity'\n        }\n    }\n];\n\nexport const activityRouting:ModuleWithProviders = RouterModule.forChild(activityRoutes);\n\n"],"sourceRoot":""}